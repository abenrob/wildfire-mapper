<!DOCTYPE html>
<html>
<head>
  <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />
  
  <script src='mapbox.js'></script>
  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <link href='mapbox.css' rel='stylesheet' />
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="MarkerCluster.css" />
  <link rel="stylesheet" href="MarkerCluster.Default.css" />
  <!--[if lte IE 8]>
    <link href='//api.tiles.mapbox.com/mapbox.js/v1.3.1/mapbox.ie.css' rel='stylesheet' >
  <![endif]-->
  
</head>
<body>
<div id='map'></div>
<div id='header'>
  <h1>US Wildfires</h1>
  <strong>2013-26-08 Source: <a href="#">USFS</a>.</strong>
</div>
<div id='infoback'>
  <div id='info'></div>
</div>
<script type='text/javascript'>

var map = L.mapbox.map('map', 'grafa.map-8cndm7h3')
  .setView([42, -100], 5);

L.control.layers({
  'Dark Map': L.mapbox.tileLayer('grafa.map-8cndm7h3').addTo(map),
  'Light Map': L.mapbox.tileLayer('grafa.map-omtiruqb')
}).addTo(map);

map.markerLayer.loadURL('fires.geojson');
  
map.markerLayer.on('click', function(e) {
  e.layer.unbindPopup();
  var feature = e.layer.feature;
  var info = '<h2>' + feature.properties.fire_name + '</h2><p>' + 
    '<strong>Fire Number: </strong>' + feature.properties.fire_number + '<br />' + 
    '<strong>Acres Burned: </strong>' + feature.properties.area + '<br />' + 
    '<strong>Report Date: </strong>' + feature.properties.report_date + '</p>';

  document.getElementById('info').innerHTML = info;
});

// Clear the tooltip when map is clicked
map.on('click',function(e){
    document.getElementById('info').innerHTML = '';
});


// Clear the tooltip when map is clicked
map.on('click',function(e){
    document.getElementById('info').innerHTML = '';
});



// Set a custom icon on each marker based on feature properties
map.markerLayer.on('layeradd', function(e) {
    var marker = e.layer,
        feature = marker.feature;

    marker.setIcon(L.icon({
    iconUrl: 'fire.png',
    iconSize: [32, 37],
    popupAnchor:  [-2, -16]
  }));
});
</script>
</body>
</html>

